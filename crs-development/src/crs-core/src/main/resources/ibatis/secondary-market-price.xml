<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap
        PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN"
        "sql-map-2.dtd">

<sqlMap namespace="secondary-market-price">

    <resultMap id="secondaryMarketPrice" class="pl.nask.crs.secondarymarket.SecondaryMarketPrice">
        <result property="id" column="id" />
        <result property="requestType" column="requestType"
            typeHandler="pl.nask.crs.payment.dao.ibatis.handlers.OperationTypeHandler" />
        <result property="customerType" column="customerType"
            typeHandler="pl.nask.crs.secondarymarket.dao.ibatis.handlers.CustomerTypeByNameHandler" />
        <result property="amount" column="amount"
            typeHandler="pl.nask.crs.commons.dao.ibatis.handlers.MonetaryBigDecimalHandler" />
    </resultMap>

    <select id="getPriceByTypes" resultMap="secondaryMarketPrice">
        SELECT
        ID as id,
        Request_Type as requestType,
        Customer_Type as customerType,
        Amount as amount
        FROM
        SecondaryMarketPrice
        WHERE
        Request_Type = #requestType,handler=pl.nask.crs.payment.dao.ibatis.handlers.OperationTypeHandler#
        AND
        Customer_Type = #customerType,handler=pl.nask.crs.secondarymarket.dao.ibatis.handlers.CustomerTypeByNameHandler#
    </select>

</sqlMap>