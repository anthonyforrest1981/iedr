<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap
        PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN"
        "sql-map-2.dtd">

<sqlMap namespace="secondary-market-buy-request-notification">

    <select id="notificationSent" resultClass="java.lang.Boolean">
        SELECT count(*) > 0
        FROM SecondaryMarketBuyRequestNotification brn
        WHERE brn.BuyRequest_Id = #buyRequestId#
        AND brn.Notification_Type =
            #notificationType,handler=pl.nask.crs.secondarymarket.dao.ibatis.handlers.BuyRequestNotificationTypeHandler#
        AND brn.Notification_Period = #notificationPeriod#
    </select>

    <insert id="create" parameterClass="pl.nask.crs.secondarymarket.BuyRequestNotification">
        INSERT INTO SecondaryMarketBuyRequestNotification(
            BuyRequest_Id,
            Notification_Period,
            Notification_Type
        ) VALUES (
            #buyRequest.id#,
            #notificationPeriod#,
            #notificationType,handler=pl.nask.crs.secondarymarket.dao.ibatis.handlers.BuyRequestNotificationTypeHandler#
        )
    </insert>

</sqlMap>
